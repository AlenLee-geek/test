  JS是脚本语言，脚本语言都需要一个解析器才能运行。对于写在HTML页面里的JS,浏览器充当了解析器的角色。对于需要单独运行的JS，NodeJS就是一个解析器。
  每一种解析器都是一个运行环境，不但允许JS定义各种数据结构，进行各种计算，还允许JS使用运行环境提供的内置对象和方法做一些事情。例如运行在浏览器中的JS的用途是操作DOM，浏览器就提供了document之类的内置对象。而运行在NodeJS中JS的用途是操作磁盘文件或搭建HTTP服务器，NodeJS就相应提供了fs、http等内置对象。
  
  在NodeJS中，一般将代码合理拆分到不同的JS文件中，每一个文件就是一个模块，而文件路径就是模块名。在编写每一个模块时，都有require、exports、module三个预先定义好的变量可供使用。

  require函数用于在当前模块中加载和使用别的模块，传入一个模块名，返回一个模块导出对象。模块名可使用相对路径（以./开头），或者是绝对路径。另外，模块名中的.js扩展可以省略。eg:
  var foo1 = require('./foo');

  另外，可以使用一下方式加载和使用一个JSON文件
 
  var data = require('./data.json');

  exports对象是当前模块的导出对象，用于导出模块工友方法和属性。别的模块通过require函数使用当前模块的exports对象。eg:

  exports.hello = function(){
       console,log('Hello world');
  }
  
  模块初始化
  一个模块中的JS代码仅在模块第一次被使用时执行一次，并在执行过程中初始化模块的导出对象。知乎，缓存起来的导出对象被重复利用。

  主模块
  通过命令行参数传递给NodeJS以启动程序的模块被称为主模块。主模块负责调度组成整个程序的其他模块完成工作。例如通过以下命令启动程序时，main.js就是主模块

  代码的组织和部署
  模块路径解析规则
  require函数支持支持斜杠（/）开头的绝对路径，也支持./开头的相对路径。但这两种路径在模块之间建立强耦合关系，一旦某个模块文件的存放位置需要变更，使用该模块的其他模块的代码也需要跟着调整，变得牵一发动全身。因此，require函数支持第三种形式的路径，写法类似于foo/bar,并依次按照以下规则解析路径，知道找到模块位置。

  1、内置模块
     如果传递给require函数的是NodeJS内置模块名称，不做路径解析，直接返回年内不模块的导出对象，例如require('fs')。
  2、node_modules目录
     NodeJS定义一个特殊的node_modules目录用于存放模块。例如某个模块路径是。
  3、NODE_PATH环境变量
    与PATH环境变量类似，NodeJS允许通过NODE_PATH环境变量来指定二维的模块搜索路径。NODE_PATH环境变量中包含一个到多个路径

  包（package）
  我们已经知道了JS模块的基本单位是单个JS文件，但复杂的模块往往由多个子模块组成。为了便于管理和使用，我们可以把由多个子模块组成。为了便于管理和使用，我们可以把由多个子模块组成的大模块称做包，并把所有子模块放在同一个目录里。在组成一个包的所有子模块中，需要一个入口模块，入口模块的导出对象呗作为包的导出对象。
